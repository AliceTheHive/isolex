---

# example config

filters:
  - type: user-filter
    ignore: [isolex, IsoFork, Yuela]

handlers:
  - type: dice-handler
    name: dice_split

  - type: math-handler
    name: test_math
    join: ','
    math:
      matrix: Array
      number: Number
    format:
      notation: exponential
      precision: 4
      fraction: ratio
    node:
      implicit: show
      parenthesis: keep

  - type: sed-handler
    name: sed_echo

  - type: random-handler
    name: rand_split

  - type: reaction-handler
    name: test_reaction
    field: body
    reactions:
      tag:
        - chance: 0.01
          name: emoji
      magic:
        - chance: 1.00
          name: k8s

  - type: time-handler
    locale: en-US
    zone: UTC

  - type: weather-handler
    api:
      key: api-key
      root: https://api.openweathermap.org/data/2.5/
    template: >-
      {{weather.name}} is {{weather.main.temp}} with {{weather.wind.speed}} wind
      and {{#each weather.weather}}{{this.description}}{{/each}}!
  - type: echo-handler
    template: >-
      {{reply cmd.context}}: {{cmd.data.message}} ({{cmd.name}})
intervals:
  - cron: '* * * * *'
    data: {}

listeners:
  - type: discord-listener
    token: discord-token

logger:
  level: debug
  name: isolex

parsers:
  - type: echo-parser
    field: body
    name: test_reaction
    tags:
      - magic
      - tag

  - type: lex-parser
    bot:
      name: isolex
      alias: test
    account:
      accessKey: access-key
      secretKey: secret-key
    region: us-east-1
    tags:
      - '!!lex'

  - type: yaml-parser
    tags:
      - '!!json'
      - '!!yaml'

  - type: split-parser
    name: test_split
    separator: ' '
    tags:
      - '!!args'

  - type: split-parser
    name: dice_split
    regexp: '(\d+)(?:d|D)(\d+)'
    tags:
      - '!!dice'

  - type: split-parser
    name: rand_split
    separator: ' '
    tags:
      - '!!rand'

  - type: echo-parser
    field: args
    name: test_math
    tags:
      - '!!math'

  - type: echo-parser
    field: args
    name: sed_echo
    tags:
      - '!!s'

storage:
  type: sqlite
  database: "./out/isolex.db"
